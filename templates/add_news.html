{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <h1 class="mb-4">Добавить новость</h1>
        <form method="POST">
            <div class="mb-3">
                <label class="form-label">Заголовок</label>
                <input type="text" class="form-control" name="title" required>
            </div>
            <div class="mb-3">
                <label class="form-label">Текст новости</label>
                <textarea class="form-control" name="content" rows="5" required></textarea>
            </div>

            <div class="mb-3">
                <label class="form-label">Выберите игру</label>
                <select class="form-select mb-2" name="game_id">
                    {% for game in games %}
                        <option value="{{ game[0] }}">{{ game[1] }}</option>
                    {% endfor %}
                </select>
                <div class="form-text">Или добавьте новую игру:</div>
            </div>

            <div class="mb-3 border p-3 rounded">
                <div class="form-check mb-2">
                    <input class="form-check-input" type="checkbox" name="new_game" id="new_game">
                    <label class="form-check-label" for="new_game">Добавить новую игру</label>
                </div>
                <input type="text" class="form-control" name="new_game_title" placeholder="Название новой игры" disabled>
            </div>

            <button type="submit" class="btn btn-primary">Опубликовать</button>
        </form>
    </div>
</div>

<script>
    document.getElementById('new_game').addEventListener('change', function() {
        const gameTitleField = document.querySelector('input[name="new_game_title"]');
        gameTitleField.disabled = !this.checked;
        if (this.checked) gameTitleField.focus();
    });
</script>
{% endblock %}